<Window xmlns="https://github.com/avaloniaui"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:local="using:SigmaLib.Views"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:vm="clr-namespace:SigmaLib.ViewModels"
		xmlns:models="clr-namespace:SigmaLib.Models"
		x:Class="SigmaLib.Views.EditUserWindow"
		x:DataType="vm:EditUserViewModel"
		Title="Изменение данных пользователя"
		Width="600" Height="800"
		MinWidth="550" MinHeight="600"
		WindowStartupLocation="CenterOwner"
		Background="#f8f9fa">

	<ScrollViewer VerticalScrollBarVisibility="Auto"
				  HorizontalScrollBarVisibility="Disabled"
				  Padding="0">

		<!-- Основной контейнер -->
		<Grid Margin="40" RowDefinitions="Auto,*,Auto,Auto">

			<!-- Заголовок -->
			<Border Grid.Row="0"
					Background="White"
					CornerRadius="8"
					BorderBrush="#e0e0e0"
					BorderThickness="1"
					Padding="25"
					Margin="0,0,0,25">
				<StackPanel HorizontalAlignment="Center">
					<TextBlock Text="Изменение данных пользователя"
							   FontSize="20"
							   FontWeight="Bold"
							   Foreground="#2c3e50"
							   HorizontalAlignment="Center"
							   Margin="0,0,0,5"/>

					<TextBlock Text="Ниже представлена информация о пользователе"
							   FontSize="13"
							   Foreground="#7f8c8d"
							   HorizontalAlignment="Center"/>
				</StackPanel>
			</Border>

			<!-- Форма ввода данных -->
			<Border Grid.Row="1"
					Background="White"
					CornerRadius="8"
					BorderBrush="#e0e0e0"
					BorderThickness="1"
					Padding="30">

				<Grid ColumnDefinitions="*,*"
					  ColumnSpacing="30"
					  RowSpacing="15">

					<!-- Левая колонка -->
					<StackPanel Grid.Column="0" Spacing="15">

						<!-- Имя -->
						<StackPanel>
							<TextBlock Text="Имя"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<TextBox Text="{Binding User.FirstName, Mode=TwoWay}"
									 Watermark="Введите имя пользователя"
									 Padding="12,10"
									 FontSize="14"
									 BorderBrush="#dce0e6"
									 BorderThickness="1"
									 CornerRadius="4"/>
						</StackPanel>

						<!-- Фамилия -->
						<StackPanel>
							<TextBlock Text="Фамилия"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<TextBox Text="{Binding User.LastName, Mode=TwoWay}"
									 Watermark="Введите фамилию"
									 Padding="12,10"
									 FontSize="14"
									 BorderBrush="#dce0e6"
									 BorderThickness="1"
									 CornerRadius="4"/>
						</StackPanel>

						<!-- Отчество -->
						<StackPanel>
							<TextBlock Text="Отчество"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<TextBox Text="{Binding User.SurName, Mode=TwoWay}"
									 Watermark="Введите отчество"
									 Padding="12,10"
									 FontSize="14"
									 BorderBrush="#dce0e6"
									 BorderThickness="1"
									 CornerRadius="4"/>
						</StackPanel>

						<!-- Email -->
						<StackPanel>
							<TextBlock Text="Электронная почта"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<TextBox Text="{Binding User.Email, Mode=TwoWay}"
									 Watermark="user@example.com"
									 Padding="12,10"
									 FontSize="14"
									 BorderBrush="#dce0e6"
									 BorderThickness="1"
									 CornerRadius="4"/>
						</StackPanel>

						<!-- Пароль -->
						<StackPanel>
							<TextBlock Text="Пароль"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<TextBox Text="{Binding User.Password, Mode=TwoWay}"
									 Watermark="Введите пароль"
									 Padding="12,10"
									 FontSize="14"
									 BorderBrush="#dce0e6"
									 BorderThickness="1"
									 CornerRadius="4"
									 PasswordChar="●"/>
						</StackPanel>

					</StackPanel>

					<!-- Правая колонка -->
					<StackPanel Grid.Column="1" Spacing="15">

						<!-- Телефон -->
						<StackPanel>
							<TextBlock Text="Телефон"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<TextBox Text="{Binding User.Phone, Mode=TwoWay}"
									 Watermark="Введите номер телефона"
									 Padding="12,10"
									 FontSize="14"
									 BorderBrush="#dce0e6"
									 BorderThickness="1"
									 CornerRadius="4"/>
						</StackPanel>

						<!-- Адрес -->
						<StackPanel>
							<TextBlock Text="Адрес проживания"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<TextBox Text="{Binding User.Address, Mode=TwoWay}"
									 Watermark="Город, улица, дом, квартира"
									 Padding="12,10"
									 FontSize="14"
									 BorderBrush="#dce0e6"
									 BorderThickness="1"
									 CornerRadius="4"
									 AcceptsReturn="True"
									 Height="100"/>
						</StackPanel>

						<!-- Роль пользователя -->
						<StackPanel>
							<TextBlock Text="Роль в системе"
									   FontSize="13"
									   FontWeight="SemiBold"
									   Foreground="#2c3e50"
									   Margin="0,0,0,5"/>
							<ComboBox SelectedItem="{Binding User.Role, Mode=TwoWay}"
									  Padding="12,10"
									  FontSize="14"
									  BorderBrush="#dce0e6"
									  BorderThickness="1"
									  CornerRadius="4"
									  Background="White">
								<ComboBox.Items>
									<models:UserRole>Reader</models:UserRole>
									<models:UserRole>Librarian</models:UserRole>
									<models:UserRole>Admin</models:UserRole>
								</ComboBox.Items>
							</ComboBox>
						</StackPanel>

						<!-- Статус блокировки -->
						<Border Background="#f8f9fa"
								CornerRadius="6"
								BorderBrush="#e9ecef"
								BorderThickness="1"
								Padding="15,12"
								Margin="0,10,0,0">
							<StackPanel Orientation="Horizontal"
										Spacing="10">
								<CheckBox IsChecked="{Binding User.IsBlocked, Mode=TwoWay}"
										  VerticalAlignment="Center"/>
								<StackPanel>
									<TextBlock Text="Статус аккаунта"
											   FontSize="13"
											   FontWeight="SemiBold"
											   Foreground="#2c3e50"/>
									<TextBlock Text="Заблокировать доступ"
											   FontSize="11"
											   Foreground="#7f8c8d"/>
								</StackPanel>
							</StackPanel>
						</Border>
					</StackPanel>
				</Grid>
			</Border>

			<!-- Результат операции -->
			<Border Grid.Row="2"
					Background="{Binding ErrorColor}"
					CornerRadius="6"
					Padding="15"
					Margin="0,20,0,15"
					IsVisible="{Binding HasError}"
					Opacity="0.95">
				<StackPanel HorizontalAlignment="Center" Spacing="5">
					<TextBlock Text="{Binding ResultMessage}"
							   Foreground="White"
							   FontWeight="SemiBold"
							   FontSize="14"
							   TextWrapping="Wrap"
							   HorizontalAlignment="Center"/>
					<TextBlock Text="Это сообщение автоматически исчезнет"
							   Foreground="White"
							   FontSize="11"
							   Opacity="0.8"
							   HorizontalAlignment="Center"/>
				</StackPanel>
			</Border>

			<!-- Кнопки действий -->
			<Grid Grid.Row="3"
				  ColumnDefinitions="*,*"
				  ColumnSpacing="15"
				  Margin="0,10,0,0">

				<!-- Кнопка отмены -->
				<Button Grid.Column="0"
						Content="Отмена"
						Command="{Binding CancelCommand}"
						Background="#6c757d"
						Foreground="White"
						BorderBrush="#6c757d"
						Padding="25,12"
						FontSize="14"
						FontWeight="SemiBold"
						CornerRadius="6"
						Cursor="Hand">
					<Button.Styles>
						<Style Selector="Button:pointerover">
							<Setter Property="Background" Value="#5a6268"/>
							<Setter Property="BorderBrush" Value="#5a6268"/>
						</Style>
					</Button.Styles>
				</Button>

				<!-- Кнопка добавления -->
				<Button Grid.Column="1"
						Content="Изменить данные пользователя"
						Command="{Binding EditUserCommand}"
						Background="#28a745"
						Foreground="White"
						BorderBrush="#28a745"
						Padding="25,12"
						FontSize="14"
						FontWeight="SemiBold"
						CornerRadius="6"
						Cursor="Hand"
						IsDefault="True">
					<Button.Styles>
						<Style Selector="Button:pointerover">
							<Setter Property="Background" Value="#218838"/>
							<Setter Property="BorderBrush" Value="#218838"/>
						</Style>
					</Button.Styles>
				</Button>

			</Grid>

		</Grid>

	</ScrollViewer>

</Window>

